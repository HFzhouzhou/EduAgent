# 认证系统快速启动指南

## 🚀 快速开始

### 1. 安装依赖
```bash
pip install -r requirements.txt
```

### 2. 启动服务器
```bash
python flask_main.py
```

### 3. 访问系统
- 主页: http://localhost:5025
- 登录页: http://localhost:5025/login
- 注册页: http://localhost:5025/register

## 🧪 测试认证系统

### 运行测试脚本
```bash
python test_auth.py
```

### 手动测试步骤

#### 1. 注册新用户
访问 http://localhost:5025/register
- 用户名: testuser
- 邮箱: test@example.com
- 密码: Test123!@#
- 真实姓名: 测试用户

#### 2. 登录系统
访问 http://localhost:5025/login
- 用户名/邮箱: testuser
- 密码: Test123!@#

#### 3. 查看主页
登录后访问 http://localhost:5025
- 应该看到用户信息显示在右上角
- 可以点击用户头像查看菜单

## 🔧 配置说明

### 数据库配置
系统使用SQLite数据库，首次运行会自动创建：
- 数据库文件: `eduagent.db`
- 自动创建所有必要的表

### 安全配置
在 `config/settings.py` 中：
```python
SECRET_KEY = "your-secret-key-here"  # 生产环境请修改
```

## 📱 功能演示

### 用户注册流程
1. 访问注册页面
2. 填写用户信息
3. 实时密码强度验证
4. 提交注册
5. 自动跳转到登录页

### 用户登录流程
1. 访问登录页面
2. 输入用户名/邮箱和密码
3. 可选择"记住我"
4. 登录成功后跳转到主页

### 用户界面
- 未登录：显示"登录"和"注册"按钮
- 已登录：显示用户头像和用户名
- 点击头像：显示用户菜单

## 🛠️ 开发说明

### 项目结构
```
├── models/
│   └── user.py              # 用户数据模型
├── services/
│   └── auth_service.py      # 认证服务
├── interface/
│   ├── auth_routes.py       # 认证API路由
│   └── auth_middleware.py   # 认证中间件
├── templates/
│   ├── login.html           # 登录页面
│   └── register.html        # 注册页面
├── static/
│   ├── css/
│   │   └── auth.css         # 认证页面样式
│   └── js/
│       └── auth.js          # 认证JavaScript
└── test_auth.py             # 测试脚本
```

### API端点
- `POST /api/auth/register` - 用户注册
- `POST /api/auth/login` - 用户登录
- `POST /api/auth/logout` - 用户登出
- `GET /api/auth/profile` - 获取用户资料
- `PUT /api/auth/profile` - 更新用户资料
- `POST /api/auth/change-password` - 修改密码
- `GET /api/auth/verify` - 验证令牌

## 🔍 故障排除

### 常见问题

#### 1. 服务器启动失败
```bash
# 检查端口是否被占用
lsof -i :5025

# 使用其他端口
python flask_main.py --port 8080
```

#### 2. 数据库错误
```bash
# 删除数据库文件重新创建
rm eduagent.db
python flask_main.py
```

#### 3. 依赖安装失败
```bash
# 升级pip
pip install --upgrade pip

# 重新安装依赖
pip install -r requirements.txt --force-reinstall
```

#### 4. 前端页面无法访问
- 检查服务器是否正在运行
- 确认端口号正确
- 检查防火墙设置

### 调试模式
```bash
# 启用调试模式
python flask_main.py --debug
```

## 📊 系统状态

### 健康检查
```bash
curl http://localhost:5025/api/health
```

### 数据库状态
```python
# 在Python中检查数据库
from models.user import User, db
from interface.flask_app import UniversityFlaskAPI

api = UniversityFlaskAPI()
with api.app.app_context():
    users = User.query.all()
    print(f"用户数量: {len(users)}")
```

## 🎯 下一步

### 生产环境部署
1. 修改SECRET_KEY
2. 使用生产数据库（PostgreSQL/MySQL）
3. 配置HTTPS
4. 设置环境变量
5. 启用日志记录

### 功能扩展
1. 邮箱验证
2. 密码重置
3. 双因素认证
4. 社交登录
5. 用户角色管理

---

**提示**: 这是一个演示系统，生产环境使用前请进行充分的安全测试和配置优化。
